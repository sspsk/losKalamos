{% extends 'base.html' %}
{% block title %}Login{% endblock %}
{% block myscript %}

<script>
  $(document).ready(function(){
    $("#regionSelector").change(function(){
      $.getJSON($SCRIPT_ROOT + '/getareas',{region : $(this).val()},function(data){
          $("#areaSelector").empty();
          $("#areaSelector").append('<option selected disabled>Area</option>');
        for(let i =0;i<data.length;i++){
          $("#areaSelector").append('<option>'+data[i][1]+'</option>');
          console.log('<option>'+data[i][1]+'</option>');
        }
      });
      //kane post request me to $(this).val() kai append to html sto select kato
    });
  });
</script>
{% endblock %}
{% block content %}

<div class="container">
 {% for message in get_flashed_messages() %}
     <div class="alert alert-info">{{ message }}</div>
 {% endfor %}


  <div class="row">
    <div class="col">
    <form class="" method="post" action="{{ url_for('reports.report') }}">
         <div class="form-group">
          <p class="h4 mb-4 text-center" >Report</p>
          </div>
           <div class="form-group">
          <select class="form-control"  name="type" >
            <option selected disabled>Type</option>
            <option>Water</option>
            <option>Road</option>
            <option>Electricity</option>
            <option>Other</option>

          </select>
          </div>
           <div class="form-group">
             <select id="regionSelector" class="form-control"  name="region" >
               <option selected disabled>Region</option>
               {% for region in regions %}
               <option>{{region['name']}}</option>
               {%endfor%}
             </select>
          </div>
          <div class="form-group">
            <select id="areaSelector" class="form-control"  name="area" >
              <option selected disabled>Area</option>
            </select>
         </div>
          <div class="form-group">
              <input type="text" id="defaultLoginFormUsername" class="form-control mb-4" placeholder="Address" name="address" required>
          </div>
           <div class="form-group">
          <input type="text" id="defaultLoginFormUsername" class="form-control mb-4" placeholder="Description" name="description" required>
          </div>
          <div class="form-group">
         <input type="text" id="defaultLoginFormUsername" class="form-control mb-4" placeholder="Contact name" name="contact_name" >
         </div>
         <div class="form-group">
        <input type="text" id="defaultLoginFormUsername" class="form-control mb-4" placeholder="Contact phone" name="contact_phone" >
        </div>
           <div class="form-group">
           <button class="btn btn-info btn-block my-4" type="submit">Report</button>
         </div>



    </form>
  </div>
  {% if g.user %}
  <div class="col">
  <form class="" method="get" action="{{url_for('reports.entries')}}">
      <div class="form-group">
       <button class="btn btn-info btn-block my-4" type="submit">Sign in</button>
      </div>
  </form>
  </div>
  {% else %}
  <div class="col">
  <form class="" method="post">
      <div class="form-group">
        <p class="h4 mb-4 text-center">Sign in</p>
        </div>
        <div class="form-group">
            <input type="text" id="defaultLoginFormUsername" class="form-control mb-4" placeholder="Username" name="username" required>
            </div>
        <div class="form-group">
        <input type="password" id="defaultLoginFormPassword" class="form-control mb-4" placeholder="Password" name="password" required>
          </div>
        <div class="form-group">
       <button class="btn btn-info btn-block my-4" type="submit">Sign in</button>
         </div>
  </form>
  </div>
  {% endif %}
  </div>
</div>



{% endblock %}
